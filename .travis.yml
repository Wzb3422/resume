language: node_js
node_js:
  - '8.9'

cache:
  directories:
    - node_modules
    - tools

before_install:
  - npm install
  - cd ./tools
  - wget -nc http://gosspublic.alicdn.com/ossutil/1.6.12/ossutil64
  - chmod 755 ossutil64
  - ./ossutil64 config -e "${OSS_ENDPOINT}" -i "${OSS_AKI}" -k "${OSS_AKS}"
  - cd ..

script:
  - npm run pdf

after_success:
  - cd ./dist
  - ../tools/ossutil64 cp -f ./* oss://wzb-resume/
